<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>word dojo</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <style>
        .newbg {
            background-color: #e0ebeb;
        }
    </style>
</head>

<body class="newbg">
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/index.html">dojolex.com</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/dojolex.html">refresh</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/dojolex.html">disable</a>
                    </li>


                </ul>

            </div>
        </div>
    </nav>
    <div class="container pt-3 px-0">
        <div class="d-flex flex-wrap">
            <div class="col-md-8 col-12 border border-primary px-0">
                <div class="progress bg-danger" style="border-radius: 0%; height: 7px;">
                    <div class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100"
                        aria-valuemin="0" aria-valuemax="100"></div>
                </div>

                <div class="bg-dark py-3 text-warning text-center h3">Core Set: One</div>
                <div class="container">
                    <div class="text-center my-3">
                        <div class="h5" id="defBox">indefinite, cautious, timid, diffident, unsettled </div>

                        <form id="myform" action="" method="" target="">
                            <label for="fname">&#8645;</label><br><br>
                            <input type="text" autocomplete="off" id="fname" name="tname" value=""
                                style="font-size:20pt;height:60px;width:250px;text-align: center;" autofocus><br><br>
                            <input class="btn btn-outline-success" id="startcore" type="submit" value="Enter">
                        </form>

                    </div>
                </div>
            </div>
            <div class="col-md-4 col-12 border border-primary px-0">
                <div class="progress" style="border-radius: 0%; height: 7px;">
                    <div class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100"
                        aria-valuemin="0" aria-valuemax="100"></div>
                </div>

                <div class="bg-dark py-3 text-center h3"> <span id="countdown" class="text-danger">&#9200; 0:00</span>
                </div>
                <div class="container">
                    <div class="text-center my-3">
                        <div class="h5 mb-2">Word Bank <i class="bi bi-soundwave"></i></div>
                        <div class="d-flex justify-content-center flex-wrap" id="wordbank">
                            <div class="border border-primary p-1" id="read" data-word="diffident"
                                style="cursor: pointer;" onclick="speak('diffident')">diffident</div>
                            <div class="border p-1" style="cursor: pointer;" onclick="speak('tentative')">tentative
                            </div>
                            <div class="border p-1" style="cursor: pointer;" onclick="speak('sheepish')">sheepish</div>
                            <div class="border p-1" style="cursor: pointer;" onclick="speak('diffident')">diffident
                            </div>

                        </div>
                        <br>
                        <button class="btn btn-lg btn-primary" onclick="location.reload() "><i
                                class="bi bi-arrow-counterclockwise"></i> Reload</button>
                        <button class="btn btn-lg btn-primary" onclick=" fetti()"><i class="bi bi-asterisk"></i>
                            Fetti</button>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div id="parent" class="container border mt-1"></div>
    <script src="https://code.jquery.com/jquery-3.6.3.js"
        integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/fettijs.js"></script>

</body>
<script src="/js/wordlist.js"></script>
<script>

    let ti = 0;

    let basetime = 100;
    let minutes = 0;
    let seconds = 0;


    function timeStart() {
        intervalID = setInterval(function () {

            seconds += 1
            ti += 1;
            var timedown = basetime - (ti * 3.33)




            document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" + timedown + "%");





            if (seconds <= 9) {
                $("#countdown").html('&#9200; ' + minutes + ':0' + seconds);
                //        $("#countdown").html('&#9200; 00:0'+ seconds);
            }

            else {
                $("#countdown").html('&#9200; ' + minutes + ':' + seconds);
            }

            if (ti == 30) {
                timeEnd();
                // $("#myform").submit();
                ti = 0;
            }

            if (seconds == 60) {
                minutes++;
                $("#countdown").html('&#9200; ' + minutes + ':' + '00');
                seconds = 0;
            }




        }, 1000);

    }

    function timeEnd() {
        clearInterval(intervalID);

    }

    timeStart();
</script>

<script>
    // Init SpeechSynth API
    const synth = window.speechSynthesis;

    // DOM Elements

    const textInput = document.querySelector("#read");
    const readBtn = document.querySelector("#read");


    //Browser identifier
    // Firefox 1.0+
    var isFirefox = typeof InstallTrigger !== "undefined";

    // Chrome 1+
    var isChrome = !!window.chrome && !!window.chrome.webstore;

    // Init voices array
    let voices = [];

    const getVoices = () => {
        voices = synth.getVoices();

        // Loop through voices and create an option for each one
        voices.forEach((voice) => {
            // Create option element
            const option = document.createElement("option");
            // Fill option with voice and language
            option.textContent = voice.name + "(" + voice.lang + ")";

            // Set needed option attributes
            option.setAttribute("data-lang", voice.lang);
            option.setAttribute("data-name", voice.name);
        });
    };

    //Line 35, 36 causes voice list duplication
    getVoices();
    if (synth.onvoiceschanged !== undefined) {
        synth.onvoiceschanged = getVoices;
    }

    //Fix for duplication, run code depending on the browser
    if (isFirefox) {
        getVoices();
    }
    if (isChrome) {
        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = getVoices;
        }
    }

    // Speak
    const speak = (data) => {
        // Check if speaking
        if (synth.speaking) {
            console.error("Already speaking...");
            return;
        }
        if (textInput.value !== "") {

            console.log(textInput.getAttribute('data-word'))

            // Get speak text
            const speakText = new SpeechSynthesisUtterance(data);

            // Speak end
            speakText.onend = (e) => {
                console.log("Done reading...");

            };

            // Speak error
            speakText.onerror = (e) => {
                console.error("Something went wrong");
            };



            // Speak
            synth.speak(speakText);
        }
    };

    // EVENT LISTENERS

    // Text form submit



</script>

<script>

    let parent = document.querySelector('#parent');

    function loadvocab() {

        for (let i = 0; i < 20; i++) {
            let p = document.createElement('li');
            p.classList = "text-primary list-unstyled fw-bold"
            p.setAttribute("id", `WID${i}`);
            p.textContent = `${i + 1}. ${vocabulary[i]['vocab']}  -- `
            let span = document.createElement('span');
            span.textContent = vocabulary[i]['meaning']
            span.classList = "fw-normal text-dark"
            p.appendChild(span);
            let span2 = document.createElement('span');
            span2.textContent = " -- " + vocabulary[i]['sentence']
            span2.classList = "fw-normal text-primary"
            p.appendChild(span2);


            // p.textContent =  `${i + 1}. ${vocabulary[i]['vocab']} // ${vocabulary[i]['meaning']}`
            parent.appendChild(p);
        }

    }

    loadvocab()

    function loadDef() {
        var randomItem = vocabulary[Math.floor(Math.random() * vocabulary.length)];
        console.log(randomItem)
        var defBox = document.getElementById('defBox')
        defBox.innerHTML = randomItem['meaning']
        let word = document.createElement('div');
        word.classList = "border p-1 border-danger"
        word.textContent = randomItem['vocab']
        word.setAttribute("onclick", `speak("${randomItem['vocab']}")`);
        word.style = "cursor: pointer;"
        var wordbank = document.getElementById("wordbank")
        wordbank.appendChild(word)
    }

    loadDef()

    document.getElementById("myform").addEventListener("submit", function (event) {
        event.preventDefault()
        loadDef()

    });


</script>

</html>