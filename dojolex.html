<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>dojolex.com</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet"
        type="text/css" />
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet"
        type="text/css" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
</head>

<body>
    <nav class="navbar navbar-expand-md bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/index.html">dojolex</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/dojolex.html">refresh</a>
                    </li>



                </ul>

            </div>
        </div>
    </nav>

    <div class="container my-3">
        <div class="d-flex justify-content-between pb-1">

            <span class="fw-bold h5"> Section 1: Verbal Module 1</span>
            <div>
                <!-- <span class="border border-dark rounded px-1 mb-1 me-1" onclick="fullscreen()" style="cursor: pointer;">
                    <i class="bi bi-window-fullscreen"></i> F11
                </span> -->
                <span class=" border border-dark rounded px-1 mb-1 text-center" onclick="timerFunction()"
                    style="cursor: pointer;">
                    <i class="bi bi-clock-history timerOn" id="timer"></i> Timer
                </span>

            </div>

        </div>
        <div id="demo" class="text-center fw-bold">00:00:00</div>
        <div class="container">

            <div class="progress bg-secondary my-3 rounded-0" style="height: 2px;">
                <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="25" aria-valuemin="0"
                    aria-valuemax="100"></div>
            </div>


            <br>
            <div class="row">
                <div class="col-12 col-md-6 border-end">

                    <div class="mb-5 py-4 fw-bold" id="question">

                        Along the highway <u>is</u> a dog and a cat.

                    </div>
                </div>
                <div class="col-12 col-md-6">
                    <div class="d-flex justify-content-between mt-4 mb-2 mx-lg-5  fw-bold  "
                        style="background-color:#D3D3D3; border-bottom: dotted gray;">
                        <div class="bg-dark text-light px-1" span id="qCount"> </div>
                        <div class="pe-1"><i class="bi bi-bookmark"></i> </div>
                    </div>

                    <div class="mb-2 mx-lg-5 py-2 ps-1 fw-bold">
                        Which correctly completes the sentence?</div>

                    <div class=" border  rounded mb-2 mx-lg-5 py-2 ps-2" id="a" style="cursor:pointer;">
                        A. This
                        is a
                        NO CHANGE.</div>
                    <div class=" border  rounded mb-2 mx-lg-5 py-2 ps-2" id="b" style="cursor:pointer;">
                        B. is
                    </div>
                    <div class=" border  rounded mb-2 mx-lg-5 py-2 ps-2" id="c" style="cursor:pointer;">
                        C. are
                    </div>
                    <div class=" border  rounded mb-2 mx-lg-5 py-2 ps-2" id="d" style="cursor:pointer;">
                        D. was
                    </div>
                </div>

            </div>
        </div>

        <div class="text-end mx-lg-5 my-4 ">
            <button type="button" class="btn btn-outline-success  " id="read">
                <i class="bi bi-soundwave"></i></button>

            <button type="button" class="btn btn-outline-primary  " id="next">Next <i
                    class="bi bi-arrow-right-circle"></i></button>
            <br>
        </div>

        <div class="container d-none" id="solution"></div>

        <div class="container px-lg-5">


        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>


    <script>

        var apiJson = [{ "id": 1, "question": "I bought a new Patek Philippe Nautilus as a gift for myself I could afford it because I just received my well-earned bonus.", "choice1": "NO CHANGE", "choice2": "myself, I could", "choice3": "myself, so", "choice4": "myself; I could", "correct": "myself; I could", "difficulty": 1, "tag": "Sentence Structure", "solution": "The original sentence is a run on.  (D) \"myself; I could\" is the best answer because it appropriately uses a semicolon to punctuate the break between two independent clauses." }, { "id": 2, "question": "Since Aatorx is too ear-piercingly loud; Seraphine cannot fall asleep", "choice1": "NO CHANGE", "choice2": "loud; therefore Seraphine", "choice3": "loud, Seraphine", "choice4": "loud Seraphine", "correct": "loud, Seraphine", "difficulty": 2, "tag": "Sentence Structure", "solution": "The original sentence incorrectly uses a semicolon to punctuate the break between a dependent clause and an independent clause.  (C) \"loud, Seraphine\" is the best answer because it appropriately uses a comma to punctuate the break between a dependent clause and an independent clause." }]

        var grammarApi = ['api empty']
        var grammarOutput = []



        var s = document.getElementById("solution")

        function showSolution() {
            s.classList.remove("d-none")
        }

        function hideSolution() {
            s.classList.add("d-none")
        }


        var a = document.getElementById("a");
        a.addEventListener("click", function () {
            checkAnswer(a);
        });

        var b = document.getElementById("b");
        b.addEventListener("click", function () {
            checkAnswer(b);
        });

        var c = document.getElementById("c");
        c.addEventListener("click", function () {
            checkAnswer(c);
        });

        var d = document.getElementById("d");
        d.addEventListener("click", function () {
            checkAnswer(d);
        });




        var progressDone = 0
        var currentQuestion = []
        function checkAnswer(ans) {
            console.log(currentQuestion.correct)
            console.log(ans.dataset.id)
            progressDone += 10
            if (ans.dataset.id === currentQuestion.correct) {

                ans.classList.remove("border-dark");
                ans.classList.toggle("bg-success");
                ans.classList.toggle("border-success");


            } else {

                cA = document.getElementById(correctChoice);
                ans.classList.remove("border-dark");
                cA.classList.remove("border-dark");
                cA.classList.add("fw-bold", "border-success", "border-3");
                ans.classList.toggle("bg-secondary");
                ans.classList.toggle("border-danger");
                console.log(correctChoice)
            }

            showSolution();
            document
                .getElementsByClassName("progress-bar")[0]
                .setAttribute("style", "width:" + progressDone + "%");
        }

        var choiceA = "A"
        var choiceB = "B"
        var choiceC = "C"
        var choiceD = "D"
        var correctChoice = "X"



        var q = 0
        var apiLen = apiJson.length
        var qbox = document.getElementById("question")
        var cQuestion = ""

        function loadQuestion(q) {
            var randomItem = apiJson[Math.floor(Math.random() * apiJson.length)];

            currentQuestion = randomItem
            choiceA = randomItem.choice1
            choiceB = randomItem.choice2
            choiceC = randomItem.choice3
            choiceD = randomItem.choice4

            qbox.innerHTML = randomItem.question
            cQuestion = randomItem.question


            document.getElementById("a").innerHTML = '<span class="fw-bold" >A.  </span>' + randomItem.choice1
            document.getElementById("a").classList.add("border-dark");
            document.getElementById("b").innerHTML = '<span class="fw-bold" >B.  </span>' + randomItem.choice2
            document.getElementById("b").classList.add("border-dark");
            document.getElementById("c").innerHTML = '<span class="fw-bold" >C.  </span>' + randomItem.choice3
            document.getElementById("c").classList.add("border-dark");
            document.getElementById("d").innerHTML = '<span class="fw-bold" >D.  </span>' + randomItem.choice4
            document.getElementById("d").classList.add("border-dark");

            a.dataset.id = randomItem.choice1
            b.dataset.id = randomItem.choice2
            c.dataset.id = randomItem.choice3
            d.dataset.id = randomItem.choice4

            if (randomItem.choice1 === randomItem.correct) { correctChoice = "a" }
            else if (randomItem.choice2 === randomItem.correct) { correctChoice = "b" }
            else if (randomItem.choice3 === randomItem.correct) { correctChoice = "c" }
            else if (randomItem.choice4 === randomItem.correct) { correctChoice = "d" }



            document.getElementById("solution").innerHTML = "Solution: " + randomItem.solution + `<h6 class="text-primary my-3  ">
                    
                    
                    <a href="/wistia.html" class="text-decoration-none" >${randomItem.tag}</a>
                    
                    
                    </h6>`
            document.getElementById("qCount").innerHTML = randomItem.id

        }


        loadQuestion(q)

        document.getElementById('next').addEventListener("click", updateQuestion)

        function updateQuestion() {
            a.classList.remove("bg-success", "border-success", "bg-secondary", "border-secondary", "border-danger", "border-dark", "fw-bold", "border-3");
            b.classList.remove("bg-success", "border-success", "bg-secondary", "border-secondary", "border-danger", "border-dark", "fw-bold", "border-3");
            c.classList.remove("bg-success", "border-success", "bg-secondary", "border-secondary", "border-danger", "border-dark", "fw-bold", "border-3");
            d.classList.remove("bg-success", "border-success", "bg-secondary", "border-secondary", "border-danger", "border-dark", "fw-bold", "border-3");
            hideSolution()

            q += 1;
            loadQuestion(q)

        }

        var timeLeft = 300000

        var countDownDate = (Date.now() + timeLeft)
        var x = setInterval(function () {
            var now = new Date().getTime();
            var distance = countDownDate - now;
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            if (hours < 10) {
                hours = "0" + hours
            }
            if (minutes < 10) {
                minutes = "0" + minutes
            }
            if (seconds < 10) {
                seconds = "0" + seconds
            }

            document.getElementById("demo").innerHTML = hours + ":"
                + minutes + ":" + seconds + "";

            if (distance < 295000) {
                document.getElementById("demo").classList.add("text-danger")
            }

            if (distance < 0) {
                clearInterval(x);
                document.getElementById("demo").innerHTML = "TIME UP";
                window.location.href = ''
            }

            timeLeft -= 1000

        }, 1000);

        function timerFunction() {

            var timer = document.getElementById("timer");
            var demo = document.getElementById("demo");

            if (timer.classList.contains('timerOn')) {

                demo.style.display = "none";
                timer.classList.remove("timerOn");


            } else {
                demo.style.display = "block";
                timer.classList.add("timerOn");

            }



        }


        // Init SpeechSynth API
        const synth = window.speechSynthesis;

        // DOM Elements

        const textInput = document.querySelector("#question");
        const readBtn = document.querySelector("#read");


        //Browser identifier
        // Firefox 1.0+
        var isFirefox = typeof InstallTrigger !== "undefined";

        // Chrome 1+
        var isChrome = !!window.chrome && !!window.chrome.webstore;

        // Init voices array
        let voices = [];

        const getVoices = () => {
            voices = synth.getVoices();

            // Loop through voices and create an option for each one
            voices.forEach((voice) => {
                // Create option element
                const option = document.createElement("option");
                // Fill option with voice and language
                option.textContent = voice.name + "(" + voice.lang + ")";

                // Set needed option attributes
                option.setAttribute("data-lang", voice.lang);
                option.setAttribute("data-name", voice.name);
            });
        };

        //Line 35, 36 causes voice list duplication
        getVoices();
        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = getVoices;
        }

        //Fix for duplication, run code depending on the browser
        if (isFirefox) {
            getVoices();
        }
        if (isChrome) {
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = getVoices;
            }
        }

        // Speak
        const speak = () => {
            // Check if speaking
            if (synth.speaking) {
                console.error("Already speaking...");
                return;
            }
            if (textInput.value !== "") {


                // Get speak text
                const speakText = new SpeechSynthesisUtterance(cQuestion);

                // Speak end
                speakText.onend = (e) => {
                    console.log("Done reading...");

                };

                // Speak error
                speakText.onerror = (e) => {
                    console.error("Something went wrong");
                };



                // Speak
                synth.speak(speakText);
            }
        };

        // EVENT LISTENERS

        // Text form submit
        readBtn.addEventListener("click", (e) => {
            e.preventDefault();
            speak();

        });



    </script>

</body>

</html>